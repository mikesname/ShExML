#########################
### Documentary Units ###
#########################

ehri:Holding ehri_units:[holding.holding_id] { # common shape
	a ehri:RecordSet ;
	rico:hasOrHadSomeMembersWithLanguage @ehri:Language ;
	rico:hasRecordSetType ric_rst:[transformers.getRecordSetType(holding.descriptions.levelOfDescription) IF validators.isRecordSetTypeDefinedInRiC(holding.descriptions.levelOfDescription)] ;
	rico:hasRecordSetType ehri_rst:[transformers.getEHRIDefinedRecordSetType(holding.descriptions.levelOfDescription) IF validators.isRecordSetTypeDefinedInEHRI(holding.descriptions.levelOfDescription)] ;
	rico:title [holding.descriptions.name] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ;
	rico:hasOrHadTitle @ehri:HoldingParralelFormOfName ;
	rico:scopeAndContent [holding.descriptions.scopeAndContent] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ;
	rico:recordResourceExtent [holding.descriptions.extentAndMedium] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ;
	rico:recordResourceStructure [holding.descriptions.systemOfArrangement] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ;
	rico:date [holding.descriptions.datesOfDescription] ;
	rico:date [holding.descriptions.unitDates] ;
	rico:hasBeginningDate @ehri:HoldingBeginningDate ;
	rico:hasEndDate @ehri:HoldingEndDate ;
	rico:isOrWasIncludedIn ehri_units:[holding.parentId] ;
	rico:resultsOrResultedFrom @ehri:Acquisition ;
	rico:identifier [holding.identifier] ;
	rico:history [holding.descriptions.biographicalHistory] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ;
	rico:history [holding.descriptions.archivalHistory] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ;
	ehri:appraisal [holding.descriptions.appraisal] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ;
	rico:accruals [holding.descriptions.accruals] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ;
	rico:conditionsOfAccess [holding.descriptions.conditionsOfAccess] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ; 
	rico:conditionsOfUse [holding.descriptions.conditionsOfUse] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ; 
	rico:conditionsOfUse [holding.descriptions.conditionsOfReproduction] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ;
	ehri:hasOrHadScript @ehri:MaterialScript ;
	ehri:physicalCharacterisiticsAndTechnicalRequirements [holding.descriptions.physicalCharacteristics] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ; 
	ehri:otherFindingAids [holding.descriptions.findingAids] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ; 
	ehri:locationOfOriginals [holding.descriptions.locationOfOriginals] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ; 
	ehri:locationOfCopies [holding.descriptions.locationOfCopies] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ; 
	ehri:publicationNote [holding.descriptions.publicationNote] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ; 
	ehri:sources [holding.descriptions.sources] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ; 
	ehri:notes [holding.descriptions.notes] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ; 
	ehri:archivistNote [holding.descriptions.archivistNote] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ; 
	ehri:relatedMaterial [holding.descriptions.relatedUnitsOfDescription] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ; 
	ehri:separatedMaterial [holding.descriptions.separatedUnitsOfDescription] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ; 
	rico:hasOrHadHolder ehri_institutions:[holding.repositoryId] ;
	rdfs:seeAlso [holding.descriptions.ref IF validators.isURL(holding.descriptions.ref)] ;
	rico:hasOrHadIdentifier @ehri:AlternateIds ;
}

ehri:Institution ehri_institutions:[holding.repositoryId] {
	rico:isOrWasHolderOf ehri_units:[holding.holding_id] ;
}

ehri:HoldingParralelFormOfName ehri_units:[parallel_name_id] { 
	a rico:Title ;
	rico:name [holding.descriptions.parallelFormsOfName.name] @[holding.descriptions.parallelFormsOfName.langCode MATCHING langcode_two_digit_equivalent] ;
	rico:isOrWasTitleOf ehri_units:[holding.descriptions.parallelFormsOfName.holding_id] ;
}

ehri:HoldingBeginningDate ehri_dates:[holding.descriptions.dates.startDate] { 
	a rico:Date ;
	rico:normalizedDateValue [holding.descriptions.dates.startDate] ;
	rico:isBeginningDateOf ehri_units:[holding.descriptions.dates.holding_id] ;
}

ehri:HoldingEndDate ehri_dates:[holding.descriptions.dates.endDate] { 
	a rico:Date ;
	rico:normalizedDateValue [holding.descriptions.dates.endDate] ;
	rico:isEndDateOf ehri_units:[holding.descriptions.dates.holding_id] ;
}

ehri:ArchiveComponent ehri_units:[holding.parentId] {
	rico:includesOrIncluded ehri_units:[holding.holding_id] ;
}

ehri:Language ehri_languages:[holding.descriptions.languageOfMaterial.lang] {
   	a rico:Language ;
   	rico:name [holding.descriptions.languageOfMaterial.lang] ;
}

ehri:Acquisition ehri_units:[transformers.combinedPathHoldingAcquisition(holding.holding_id) IF validators.nonEmpty(holding.descriptions.acquisition)] {
	a rico:Activity ;
	rico:hasActivityType ehri:AcquisitionType ;
	rico:generalDescription [holding.descriptions.acquisition] @[holding.descriptions.languageCode MATCHING langcode_two_digit_equivalent] ;
}

ehri:MaterialScript ehri_material_script:[holding.descriptions.scriptOfMaterial.script] {
	a ehri:MaterialScript ;
	rico:name [holding.descriptions.scriptOfMaterial.script] ;
	ehri:isOrWasScriptOf ehri_units:[holding.descriptions.scriptOfMaterial.holding_id] ;
}

ehri:AlternateIds ehri_units:[transformers.combinedPathHoldingAlternateIDs(holding.otherIdentifiers.holding_id, holding.otherIdentifiers.holding_id.index()) IF validators.nonEmpty(holding.otherIdentifiers.identifier)] {
	a rico:Identifier ;
	rico:textualValue [holding.otherIdentifiers.identifier] ;
	rico:isOrWasIdentifierOf ehri_units:[holding.otherIdentifiers.holding_id] ;
}